(this["webpackJsonpnotes-app"]=this["webpackJsonpnotes-app"]||[]).push([[0],{61:function(e,t,a){},62:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(1),c=a.n(r),s=a(30),i=a.n(s),o=a(3),l=a.n(o),j=a(6),d=a(8),u=a(7),b=a.n(u),p=a(14),h=a(13);function x(e){var t=e.setIsLogin,a=Object(r.useState)({name:"",email:"",password:""}),c=Object(d.a)(a,2),s=c[0],i=c[1],o=Object(r.useState)(""),u=Object(d.a)(o,2),x=u[0],O=u[1],m=function(e){var t=e.target,a=t.name,n=t.value;i(Object(h.a)(Object(h.a)({},s),{},Object(p.a)({},a,n))),O("")},f=function(){var e=Object(j.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,b.a.post("/users/register",{username:s.name,email:s.email,password:s.password});case 4:a=e.sent,i({name:"",email:"",password:""}),O(a.data.msg),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),e.t0.response.data.msg&&O(e.t0.response.data.msg);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(j.a)(l.a.mark((function e(a){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,b.a.post("/users/login",{email:s.email,password:s.password});case 4:n=e.sent,i({email:"",password:""}),localStorage.setItem("tokenStore",n.data.token),t(!0),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),e.t0.response.data.msg&&O(e.t0.response.data.msg);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),g=Object(r.useState)(!1),w=Object(d.a)(g,2),k=w[0],y=w[1],S={visibility:k?"visible":"hidden",opacity:k?1:0};return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("header",{className:"login-head",children:Object(n.jsx)("div",{className:"logo",children:Object(n.jsx)("h1",{children:"Notify"})})}),Object(n.jsxs)("section",{className:"login-page",children:[Object(n.jsxs)("div",{className:"login create-note",children:[Object(n.jsx)("h2",{children:"Login"}),Object(n.jsxs)("form",{onSubmit:v,children:[Object(n.jsx)("input",{type:"email",name:"email",id:"login-email",placeholder:"Email",required:!0,value:s.email,onChange:m}),Object(n.jsx)("input",{type:"password",name:"password",id:"login-password",placeholder:"password",required:!0,value:s.password,autoComplete:"true",onChange:m}),Object(n.jsx)("button",{type:"submit",children:"Login"}),Object(n.jsxs)("p",{children:["Don't have an account?",Object(n.jsx)("span",{onClick:function(){return y(!0)},children:"Register Now"})]}),Object(n.jsx)("h3",{children:x})]})]}),Object(n.jsxs)("div",{className:"register create-note",style:S,children:[Object(n.jsx)("h2",{children:"Register"}),Object(n.jsxs)("form",{onSubmit:f,children:[Object(n.jsx)("input",{type:"text",name:"name",id:"register-name",placeholder:"Username",required:!0,value:s.name,onChange:m}),Object(n.jsx)("input",{type:"email",name:"email",id:"register-email",placeholder:"Email",required:!0,value:s.email,onChange:m}),Object(n.jsx)("input",{type:"password",name:"password",id:"register-password",placeholder:"Password",required:!0,value:s.password,autoComplete:"true",onChange:m}),Object(n.jsx)("button",{type:"submit",children:"Register"}),Object(n.jsxs)("p",{children:["Already have an account?",Object(n.jsx)("span",{onClick:function(){return y(!1)},children:"Login Now"})]}),Object(n.jsx)("h3",{children:x})]})]})]})]})}var O=a(11);function m(e){var t=e.setIsLogin;return Object(n.jsxs)("header",{children:[Object(n.jsx)("div",{className:"logo",children:Object(n.jsx)("h1",{children:Object(n.jsx)(O.b,{to:"/",children:"Notify"})})}),Object(n.jsxs)("ul",{children:[Object(n.jsx)("li",{children:Object(n.jsx)(O.b,{to:"/",children:"Home"})}),Object(n.jsx)("li",{children:Object(n.jsx)(O.b,{to:"/create",children:"Create Note"})}),Object(n.jsx)("li",{onClick:function(){localStorage.clear(),t(!1)},children:Object(n.jsx)(O.b,{to:"/",children:"Logout"})})]})]})}var f=a(2);function v(e){var t=e.match,a=Object(r.useState)({title:"",content:"",date:"",id:""}),c=Object(d.a)(a,2),s=c[0],i=c[1],o=Object(f.e)();Object(r.useEffect)((function(){(function(){var e=Object(j.a)(l.a.mark((function e(){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=localStorage.getItem("tokenStore"),!t.params.id){e.next=6;break}return e.next=4,b.a.get("/api/notes/".concat(t.params.id),{headers:{Authorization:a}});case 4:n=e.sent,i({title:n.data.title,content:n.data.content,date:new Date(n.data.date).toLocaleDateString(),id:n.data._id});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t.params.id]);var u=function(e){var t=e.target,a=t.name,n=t.value;i(Object(h.a)(Object(h.a)({},s),{},Object(p.a)({},a,n)))},x=function(){var e=Object(j.a)(l.a.mark((function e(t){var a,n,r,c,i,j;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!(a=localStorage.getItem("tokenStore"))){e.next=9;break}return n=s.title,r=s.content,c=s.date,i=s.id,j={title:n,content:r,date:c},e.next=8,b.a.put("/api/notes/".concat(i),j,{headers:{Authorization:a}});case 8:return e.abrupt("return",o.push("/"));case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),window.location.href="/";case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsxs)("div",{className:"create-note",children:[Object(n.jsx)("h2",{children:"Edit Note"}),Object(n.jsxs)("form",{onSubmit:x,autoComplete:"off",children:[Object(n.jsxs)("div",{className:"row",children:[Object(n.jsx)("label",{htmlFor:"title",children:"Title"}),Object(n.jsx)("input",{type:"text",value:s.title,id:"title",name:"title",required:!0,onChange:u})]}),Object(n.jsxs)("div",{className:"row",children:[Object(n.jsx)("label",{htmlFor:"content",children:"Content"}),Object(n.jsx)("textarea",{type:"text",value:s.content,id:"content",name:"content",required:!0,rows:"10",onChange:u})]}),Object(n.jsxs)("label",{htmlFor:"date",children:["Date: ",s.date," "]}),Object(n.jsx)("div",{className:"row",children:Object(n.jsx)("input",{type:"date",id:"date",name:"date",onChange:u})}),Object(n.jsx)("button",{type:"submit",children:"Save"})]})]})}function g(){var e=Object(r.useState)({title:"",content:"",date:""}),t=Object(d.a)(e,2),a=t[0],c=t[1],s=Object(f.e)(),i=function(e){var t=e.target,n=t.name,r=t.value;c(Object(h.a)(Object(h.a)({},a),{},Object(p.a)({},n,r)))},o=function(){var e=Object(j.a)(l.a.mark((function e(t){var n,r,c,i,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!(n=localStorage.getItem("tokenStore"))){e.next=9;break}return r=a.title,c=a.content,i=a.date,o={title:r,content:c,date:i},e.next=8,b.a.post("/notes",o,{headers:{Authorization:n}});case 8:return e.abrupt("return",s.push("/"));case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),window.location.href="/";case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsxs)("div",{className:"create-note",children:[Object(n.jsx)("h2",{children:"Create Note"}),Object(n.jsxs)("form",{onSubmit:o,autoComplete:"off",children:[Object(n.jsxs)("div",{className:"row",children:[Object(n.jsx)("label",{htmlFor:"title",children:"Title"}),Object(n.jsx)("input",{type:"text",value:a.title,id:"title",name:"title",required:!0,onChange:i})]}),Object(n.jsxs)("div",{className:"row",children:[Object(n.jsx)("label",{htmlFor:"content",children:"Content"}),Object(n.jsx)("textarea",{type:"text",value:a.content,id:"content",name:"content",required:!0,rows:"10",onChange:i})]}),Object(n.jsxs)("label",{htmlFor:"date",children:["Date: ",a.date]}),Object(n.jsx)("div",{className:"row",children:Object(n.jsx)("input",{type:"date",id:"date",name:"date",onChange:i})}),Object(n.jsx)("button",{type:"submit",children:"Save"})]})]})}var w=a(32);function k(){var e=Object(r.useState)([]),t=Object(d.a)(e,2),a=t[0],c=t[1],s=Object(r.useState)(""),i=Object(d.a)(s,2),o=i[0],u=i[1],p=function(){var e=Object(j.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("/notes",{headers:{Authorization:t}});case 2:a=e.sent,c(a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){var e=localStorage.getItem("tokenStore");u(e),e&&p(e)}),[]);var h=function(){var e=Object(j.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!o){e.next=5;break}return e.next=4,b.a.delete("/notes/".concat(t),{headers:{Authorization:o}});case 4:p(o);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),window.location.href="/";case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)("div",{className:"note-wrapper",children:a.map((function(e){return Object(n.jsxs)("div",{className:"card",children:[Object(n.jsx)("h4",{title:e.title,children:e.title}),Object(n.jsx)("div",{className:"text-wrapper",children:Object(n.jsx)("p",{children:e.content})}),Object(n.jsx)("p",{className:"date",children:Object(w.a)(e.date)}),Object(n.jsxs)("div",{className:"card-footer",children:[e.name,Object(n.jsx)(O.b,{to:"edit/".concat(e._id),children:"Edit"})]}),Object(n.jsx)("button",{className:"close",onClick:function(){return h(e._id)},children:"x"})]},e._id)}))})}function y(e){var t=e.setIsLogin;return Object(n.jsx)(O.a,{children:Object(n.jsxs)("div",{className:"notes-page",children:[Object(n.jsx)(m,{setIsLogin:t}),Object(n.jsxs)("section",{children:[Object(n.jsx)(f.a,{path:"/",component:k,exact:!0}),Object(n.jsx)(f.a,{path:"/create",component:g,exact:!0}),Object(n.jsx)(f.a,{path:"/edit/:id",component:v,exact:!0})]})]})})}a(61);function S(){var e=Object(r.useState)(!1),t=Object(d.a)(e,2),a=t[0],c=t[1];return Object(r.useEffect)((function(){(function(){var e=Object(j.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=localStorage.getItem("tokenStore"))){e.next=11;break}return e.next=4,b.a.get("/users/verify",{headers:{Authorization:t}});case 4:if(a=e.sent,console.log(a),c(a.data),a.data){e.next=9;break}return e.abrupt("return",localStorage.clear());case 9:e.next=12;break;case 11:c(!1);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(n.jsx)("div",{className:"App",children:a?Object(n.jsx)(y,{setIsLogin:c}):Object(n.jsx)(x,{setIsLogin:c})})}i.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(S,{})}),document.getElementById("root"))}},[[62,1,2]]]);
//# sourceMappingURL=main.cb1635a0.chunk.js.map